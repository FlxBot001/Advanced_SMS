<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}School Management System{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css">
   <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
   {% block extra_css %}{% endblock %}
   
   <!-- Meta Tags -->
   <meta name="description" content="School Management System Dashboard">
   <meta name="author" content="Your School Name">
/head>
body>
   <!-- Navigation -->
   <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
       <div class="container-fluid">
           <a class="navbar-brand" href="{% url 'main-dashboard' %}">
               <img src="{% static 'img/logo.png' %}" alt="Logo" height="30" class="d-inline-block align-text-top">
               School Dashboard
           </a>
           
           <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
               <span class="navbar-toggler-icon"></span>
           </button>
           
           <div class="collapse navbar-collapse" id="navbarMain">
               <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                   {% if user.is_authenticated %}
                       {% if user.is_staff %}
                           <li class="nav-item">
                               <a class="nav-link" href="{% url 'main-dashboard' %}">
                                   <i class="fas fa-chart-line"></i> Admin Dashboard
                               </a>
                           </li>
                       {% endif %}
                       
                       {% if user.teacher %}
                           <li class="nav-item">
                               <a class="nav-link" href="{% url 'teacher-dashboard' %}">
                                   <i class="fas fa-chalkboard-teacher"></i> Teacher Dashboard
                               </a>
                           </li>
                       {% endif %}
                       
                       {% if user.student %}
                           <li class="nav-item">
                               <a class="nav-link" href="{% url 'student-dashboard' %}">
                                   <i class="fas fa-user-graduate"></i> Student Dashboard
                               </a>
                           </li>
                       {% endif %}
                       
                       <li class="nav-item dropdown">
                           <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                               <i class="fas fa-book"></i> Courses
                           </a>
                           <ul class="dropdown-menu">
                               <li><a class="dropdown-item" href="{% url 'course-list' %}">All Courses</a></li>
                               {% if user.teacher %}
                                   <li><a class="dropdown-item" href="{% url 'course-create' %}">Create Course</a></li>
                               {% endif %}
                           </ul>
                       </li>
                   {% endif %}
               </ul>
               
               <!-- User Menu -->
               <ul class="navbar-nav ms-auto">
                   {% if user.is_authenticated %}
                       <li class="nav-item dropdown">
                           <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                               <i class="fas fa-user-circle"></i> {{ user.get_full_name|default:user.username }}
                           </a>
                           <ul class="dropdown-menu dropdown-menu-end">
                               <li><a class="dropdown-item" href="{% url 'profile' %}">Profile</a></li>
                               <li><a class="dropdown-item" href="{% url 'settings' %}">Settings</a></li>
                               <li><hr class="dropdown-divider"></li>
                               <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
                           </ul>
                       </li>
                       
                       <!-- Notifications -->
                       <li class="nav-item dropdown">
                           <a class="nav-link" href="#" role="button" data-bs-toggle="dropdown">
                               <i class="fas fa-bell"></i>
                               {% if notifications_count %}
                                   <span class="badge bg-danger">{{ notifications_count }}</span>
                               {% endif %}
                           </a>
                           <ul class="dropdown-menu dropdown-menu-end notification-dropdown">
                               {% for notification in notifications %}
                                   <li>
                                       <a class="dropdown-item" href="{{ notification.link }}">
                                           {{ notification.message }}
                                           <small class="text-muted d-block">{{ notification.created_at|timesince }} ago</small>
                                       </a>
                                   </li>
                               {% empty %}
                                   <li><span class="dropdown-item">No new notifications</span></li>
                               {% endfor %}
                           </ul>
                       </li>
                   {% else %}
                       <li class="nav-item">
                           <a class="nav-link" href="{% url 'login' %}">Login</a>
                       </li>
                   {% endif %}
               </ul>
           </div>
       </div>
   </nav>
    <!-- Main Content -->
   <div class="container-fluid">
       <div class="row">
           <!-- Sidebar (if authenticated) -->
           {% if user.is_authenticated %}
               <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                   <div class="position-sticky pt-3">
                       <ul class="nav flex-column">
                           <li class="nav-item">
                               <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"
                                  href="{% url 'main-dashboard' %}">
                                   <i class="fas fa-home"></i> Home
                               </a>
                           </li>
                           
                           {% if user.is_staff %}
                               <li class="nav-item">
                                   <a class="nav-link" href="{% url 'admin:index' %}">
                                       <i class="fas fa-cog"></i> Admin Panel
                                   </a>
                               </li>
                           {% endif %}
                           
                           <li class="nav-item">
                               <a class="nav-link" href="{% url 'calendar' %}">
                                   <i class="fas fa-calendar"></i> Calendar
                               </a>
                           </li>
                           
                           <li class="nav-item">
                               <a class="nav-link" href="{% url 'messages' %}">
                                   <i class="fas fa-envelope"></i> Messages
                               </a>
                           </li>
                       </ul>
                       
                       <!-- Quick Actions -->
                       <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                           <span>Quick Actions</span>
                       </h6>
                       <ul class="nav flex-column mb-2">
                           {% if user.teacher %}
                               <li class="nav-item">
                                   <a class="nav-link" href="{% url 'take-attendance' %}">
                                       <i class="fas fa-clipboard-check"></i> Take Attendance
                                   </a>
                               </li>
                           {% endif %}
                           
                           {% if user.student %}
                               <li class="nav-item">
                                   <a class="nav-link" href="{% url 'submit-assignment' %}">
                                       <i class="fas fa-upload"></i> Submit Assignment
                                   </a>
                               </li>
                           {% endif %}
                       </ul>
                   </div>
               </nav>
           {% endif %}
            <!-- Page Content -->
           <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
               {% if messages %}
                   {% for message in messages %}
                       <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                           {{ message }}
                           <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                       </div>
                   {% endfor %}
               {% endif %}
               
               {% block content %}{% endblock %}
           </main>
       </div>
   </div>
    <!-- Footer -->
   <footer class="footer mt-auto py-3 bg-light">
       <div class="container text-center">
           <span class="text-muted">Â© {% now "Y" %} School Management System. All rights reserved.</span>
       </div>
   </footer>
    <!-- JavaScript -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
   <script src="{% static 'js/dashboard.js' %}"></script>
   {% block extra_js %}{% endblock %}
/body>
/html>